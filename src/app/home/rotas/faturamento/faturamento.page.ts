/* eslint-disable @typescript-eslint/dot-notation */
import { Component, OnInit, ViewChild } from '@angular/core';
import { Storage } from '@ionic/storage-angular';
import { Browser } from '@capacitor/browser';
import { Router } from '@angular/router';
import {
  LoadingController,
  MenuController,
  AlertController,
  PopoverController,
  isPlatform,
  ToastController,
  NavController,
} from '@ionic/angular';
import { format, parseISO } from 'date-fns';
import { StatusBar } from '@capacitor/status-bar';
import { ChartDataset, ChartOptions, ChartType, Color } from 'chart.js';
import { BaseChartDirective } from 'ng2-charts';
import { timeout } from 'rxjs/operators';
import { LoginService } from 'src/app/login/services/login/login.service';
import { StorageService } from 'src/app/services/storage/storage.service';
import { FaturamentoService } from 'src/app/home/services/faturamento/faturamento.service';
import { File } from '@awesome-cordova-plugins/file/ngx';
import { FileOpener } from '@awesome-cordova-plugins/file-opener/ngx';

@Component({
  selector: 'app-faturamento',
  templateUrl: './faturamento.page.html',
  styleUrls: ['./faturamento.page.scss'],
})
export class FaturamentoPage implements OnInit {
  //Chart configs
  public chartData: ChartDataset[] = [];
  public chartType: ChartType = 'bar';
  public chartlabels: string[] = [];
  public chartOptions: ChartOptions = {
    locale: 'pt-BR',
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      title: {
        display: true,
        text: 'Gráfico do Faturamento',
        padding: {
          top: 10,
          bottom: 0,
        },
      },
      legend: {
        display: true,
        position: 'top',
        align: 'center',
        labels: {
          boxWidth: 15,
          boxHeight: 15,
        },
      },
    },
    scales: {
      y: {
        beginAtZero: true,
        display: false,
        ticks: {
          callback: (value) =>
            value.toLocaleString('pt-br', {
              style: 'currency',
              currency: 'BRL',
            }),
        },
      },
    },
  };
  // eslint-disable-next-line @typescript-eslint/member-ordering
  @ViewChild(BaseChartDirective) chart: BaseChartDirective;

  month = [
    'Janeiro',
    'Fevereiro',
    'Março',
    'Abril',
    'Maio',
    'Junho',
    'Julho',
    'Agosto',
    'Setembro',
    'Outubro',
    'Novembro',
    'Dezembro',
  ];

  //Settings and Bool
  tryies = 0;
  contentLoader: boolean;
  dateLoader: boolean;
  dateLoaderTotal: boolean;
  mask: boolean;
  cmvPerc: boolean;
  perc: string;
  displayInterval: string;
  displayDay: string;
  unidadesCheck: any;
  multiempresa: any;
  displayUnidades = false;
  valueGraficoInterval: string;
  valueGraficoIntervalFilter: string;
  titleGra: string;
  fatHeaderTime: string;

  //Login
  valFLogin: boolean;
  valCnpj: string;
  valToken: string;
  valIdToken: string;
  valLogin: string;
  valTokenUsuario: string;
  empresa: string;

  //Faturamento
  unidadesFat: string[];
  unidadesHeader: string[];
  somaFatHeader: string;
  somaMargemHeader: string;
  somaCMVHeader: string;
  somaFatTotal: string;
  somaMargemTotal: string;
  somaCMVTotal: string;
  intervalHeader: string;
  qntCC = 0;

  //Date
  maxDate: any = format(parseISO(new Date().toISOString()), 'yyyy-MM-dd');
  interval: string;
  dateValueInit: string;
  dateValueFinish: string;
  dateValueDay: string;
  dateValueDayFormat: string;
  dateValueInitFormat: string;
  dateValueFinishFormat: string;
  dateTimeFinish: any;
  dateTimeDay: any;
  dateTimeInit: any;
  displayIntervalUnid: string;

  // storage
  private auth: any;
  private faturamentoStorage: any;
  private multiEmpresaStorage: any;
  private appConfigStorage: any;

  constructor(
    private lojas: FaturamentoService,
    private navCtrl: NavController,
    private service: LoginService,
    public loadingController: LoadingController,
    private menu: MenuController,
    private storage: Storage,
    private storageService: StorageService,
    private router: Router,
    private file: File,
    private opener: FileOpener,
    public alertController: AlertController,
    public toastController: ToastController
  ) {}

  ngOnInit() {
    const data = 'data:application/pdf;base64,JVBERi0xLjMNCiXFrW+BDQoxIDAgb2JqDQo8PA0KL1R5cGUgL0NhdGFsb2cNCi9QYWdlcyAzIDAgUg0KL091dGxpbmVzIDIgMCBSDQovVmlld2VyUHJlZmVyZW5jZXMgPDwgL0hpZGVUb29sYmFyIGZhbHNlIC9GaXRXaW5kb3cgdHJ1ZSA+Pg0KPj4NCmVuZG9iag0KMiAwIG9iag0KPDwNCi9UeXBlIC9PdXRsaW5lcw0KL0NvdW50IDANCj4+DQplbmRvYmoNCjMgMCBvYmoNCjw8DQovVHlwZSAvUGFnZXMNCi9Db3VudCAxDQovS2lkcyBbNCAwIFJdDQovTWVkaWFCb3ggWzAgMCA1OTUgODQxXQ0KL1Jlc291cmNlcyA8PCANCi9Gb250IDw8IA0KICAvRjAwIDYgMCBSIA0KICAvRjAxIDggMCBSIA0KICAvRjAyIDEwIDAgUiANCiAgPj4NCi9Qcm9jU2V0IDEzIDAgUg0KPj4NCj4+DQplbmRvYmoNCjQgMCBvYmoNCjw8DQovVHlwZSAvUGFnZQ0KL1BhcmVudCAzIDAgUg0KL0NvbnRlbnRzIDUgMCBSDQovTWVkaWFCb3ggWzAgMCA1OTUgODQxXQ0KPj4NCmVuZG9iag0KNSAwIG9iag0KPDwgL0xlbmd0aCAxMzE2OSA+Pg0Kc3RyZWFtDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA2NzYgNTM4IDEzNiByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNjc5IG0gNTY2IDY3OSBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA2NzkgbSA1NjYgNjc5IGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNjYxIDUzOCAxNCByZSBmDQowLjc1IHcNCjAuODcgMC44NyAwLjg3IHJnDQoyOCA2NjEgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA2NjIgbSA1NjYgNjYyIGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDY2MiBtIDU2NiA2NjIgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA2NDYgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDY0NiA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDY0NyBtIDU2NiA2NDcgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA2MzEgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMC44NyAwLjg3IDAuODcgcmcNCjI4IDYzMSA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDYzMiBtIDU2NiA2MzIgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNjMyIG0gNTY2IDYzMiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDYxNiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNjE2IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNjE3IG0gNTY2IDYxNyBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDYwMSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggNjAxIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNjAyIG0gNTY2IDYwMiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDU4NiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNTg2IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNTg3IG0gNTY2IDU4NyBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA1ODcgbSA1NjYgNTg3IGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNTcxIDUzOCAxNCByZSBmDQowLjc1IHcNCjAuODcgMC44NyAwLjg3IHJnDQoyOCA1NzEgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA1NzIgbSA1NjYgNTcyIGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDU3MiBtIDU2NiA1NzIgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA1NTYgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDU1NiA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDU1NyBtIDU2NiA1NTcgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNTU3IG0gNTY2IDU1NyBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDU0MSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggNTQxIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNTQyIG0gNTY2IDU0MiBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA1NDIgbSA1NjYgNTQyIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNTI2IDUzOCAxNCByZSBmDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA1MjYgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA1MjcgbSA1NjYgNTI3IGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDUyNyBtIDU2NiA1MjcgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA1MTEgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMC44NyAwLjg3IDAuODcgcmcNCjI4IDUxMSA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDUxMiBtIDU2NiA1MTIgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNTEyIG0gNTY2IDUxMiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDQ5NiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNDk2IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNDk3IG0gNTY2IDQ5NyBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDQ4MSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggNDgxIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNDgyIG0gNTY2IDQ4MiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDQ2NiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNDY2IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNDY3IG0gNTY2IDQ2NyBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDQ1MSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggNDUxIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNDUyIG0gNTY2IDQ1MiBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA0NTIgbSA1NjYgNDUyIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggNDM2IDUzOCAxNCByZSBmDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA0MzYgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA0MzcgbSA1NjYgNDM3IGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDQzNyBtIDU2NiA0MzcgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA0MjEgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMC44NyAwLjg3IDAuODcgcmcNCjI4IDQyMSA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDQyMiBtIDU2NiA0MjIgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCA0MDYgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDQwNSA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDQwNiBtIDU2NiA0MDYgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggNDA2IG0gNTY2IDQwNiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDM5MSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggMzkwIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMzkxIG0gNTY2IDM5MSBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAzOTEgbSA1NjYgMzkxIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMzc2IDUzOCAxNCByZSBmDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAzNzUgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAzNzYgbSA1NjYgMzc2IGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMzYxIDUzOCAxNCByZSBmDQowLjc1IHcNCjAuODcgMC44NyAwLjg3IHJnDQoyOCAzNjAgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAzNjEgbSA1NjYgMzYxIGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDM2MSBtIDU2NiAzNjEgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAzNDYgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDM0NSA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDM0NiBtIDU2NiAzNDYgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAzMzEgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMC44NyAwLjg3IDAuODcgcmcNCjI4IDMzMCA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDMzMSBtIDU2NiAzMzEgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMzMxIG0gNTY2IDMzMSBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDMxNiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMzE1IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMzE2IG0gNTY2IDMxNiBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDMwMSA1MzggMTQgcmUgZg0KMC43NSB3DQowLjg3IDAuODcgMC44NyByZw0KMjggMzAwIDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMzAxIG0gNTY2IDMwMSBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAzMDEgbSA1NjYgMzAxIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjg2IDUzOCAxNCByZSBmDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAyODUgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAyODYgbSA1NjYgMjg2IGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjcxIDUzOCAxNCByZSBmDQowLjc1IHcNCjAuODcgMC44NyAwLjg3IHJnDQoyOCAyNzAgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAyNzEgbSA1NjYgMjcxIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjU2IDUzOCAxNCByZSBmDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAyNTUgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAyNTYgbSA1NjYgMjU2IGwgcw0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDI1NiBtIDU2NiAyNTYgbCBzDQowLjc1IHcNCjEuMDAgMS4wMCAxLjAwIHJnDQoyOCAyNDEgNTM4IDE0IHJlIGYNCjAuNzUgdw0KMC44NyAwLjg3IDAuODcgcmcNCjI4IDI0MCA1MzcgMTUgcmUgZg0KIDEgdw0KMC4wMCAwLjAwIDAuMDAgUkcNCjI4IDI0MSBtIDU2NiAyNDEgbCBzDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMjQxIG0gNTY2IDI0MSBsIHMNCjAuNzUgdw0KMS4wMCAxLjAwIDEuMDAgcmcNCjI4IDIyNiA1MzggMTQgcmUgZg0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjI1IDUzNyAxNSByZSBmDQogMSB3DQowLjAwIDAuMDAgMC4wMCBSRw0KMjggMjI2IG0gNTY2IDIyNiBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAyMjYgbSA1NjYgMjI2IGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjExIDUzOCAxNCByZSBmDQowLjc1IHcNCjAuODcgMC44NyAwLjg3IHJnDQoyOCAyMTAgNTM3IDE1IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCAyMTEgbSA1NjYgMjExIGwgcw0KMC43NSB3DQoxLjAwIDEuMDAgMS4wMCByZw0KMjggMjggNTM4IDE0IHJlIGYNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA0MSBtIDU2NiA0MSBsIHMNCiAxIHcNCjAuMDAgMC4wMCAwLjAwIFJHDQoyOCA0MSBtIDU2NiA0MSBsIHMNCkJUDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCAxMiBUZg0KIDEgMCAwIDEgMTg1IDc3NSBUbSAoRmVjaGFtZW50byBkZSBDYWl4YSAtIFZlbmRhIEZhdHVyYWRhKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDEgOCBUZg0KIDEgMCAwIDEgMjggNzgyIFRtIChQ4WcuOjEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA5IFRmDQogMSAwIDAgMSAyOCA4MDMgVG0gKEVNUFJFU0EgUEFSQSBURVNURVMgRE8gU0lTVEVNQSBEQSBNQVJLS0FSKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDEgOCBUZg0KIDEgMCAwIDEgNTA2IDgwMyBUbSAoRGF0YToyOC8xMC8yMDIyKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDEgOCBUZg0KIDEgMCAwIDEgNTI2IDc4MiBUbSAoSG9yYToxNDo0MikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDEwIFRmDQogMSAwIDAgMSAyNjcgNzU2IFRtICgwMSAtIExPSkEgMDEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAyOCA3MjMgVG0gKEZlY2hhbWVudG86KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMjggNzA0IFRtIChPcGVyYWRvcjopIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSAxMTMgNzA0IFRtIChBTkRSRSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDQ5MyA3NDIgVG0gKFF0ZCBDYWl4YXM6KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNTQyIDc0MiBUbSAoMSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDQ5MyA3MjMgVG0gKEFiZXJ0b3M6KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNTQyIDcyMyBUbSAoMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDQ5MyA3MDQgVG0gKEZlY2hhZG9zOikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDU0MiA3MDQgVG0gKDEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAyOCA3NDIgVG0gKEFiZXJ0dXJhIGRvIENhaXhhOikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDI4IDY4NiBUbSAoRnVuZG8gZGUgQ2FpeGE6KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgMTEzIDY4NiBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDExMyA3NDIgVG0gKDI4LzEwLzIwMjIpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSAxMTMgNzIzIFRtICgyOC8xMC8yMDIyKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNjY2IFRtIChWZW5kYSBUb3RhbCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDUzMCA2NjYgVG0gKDUuNjk5LDc2KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDY2NiBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNjUxIFRtIChEZXZvbHXn428gY29tIE1vdmltZW50byBGaW5hbmNlaXJvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTQ1IDY1MSBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA2NTEgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDYzNiBUbSAoRGV2b2x15+NvIHNlbSBNb3ZpbWVudG8gRmluYW5jZWlybykgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU0NSA2MzYgVG0gKDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNjM2IFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA2MjEgVG0gKFRvdGFsIFZlbmRhIENhbmNlbGFkYSBhIFByYXpvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTMwIDYyMSBUbSAoMS4xNDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNjIxIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA2MDYgVG0gKFRvdGFsIFZlbmRhIENhbmNlbGFkYSBhIFZpc3RhKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTQ1IDYwNiBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA2MDYgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDU5MSBUbSAoVG90YWwgVmVuZGEgQ2FuY2VsYWRhIHNlbSBQYWdhbWVudG8pIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NDUgNTkxIFRtICgwLDAwKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDU5MSBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNTc2IFRtIChUb3RhbCBkZSBEZXNjb250b3MpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NDUgNTc2IFRtICgwLDAwKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDU3NiBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNTYxIFRtIChUb3RhbCBkZSBBY3Lpc2NpbW8pIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NDUgNTYxIFRtICgwLDA2KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDU2MSBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNTQ2IFRtIChUb3RhbCBkZSBGcmV0ZSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU0NSA1NDYgVG0gKDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNTQ2IFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA1MzEgVG0gKFRvdGFsIGRlIFNlZ3VybykgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU0NSA1MzEgVG0gKDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNTMxIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA1MTYgVG0gKFZlbmRhIFRvdGFsIEztcXVpZGEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1MzAgNTE2IFRtICg0LjU1OSw4MikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA1MTYgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDUwMSBUbSAoQ29udGFzIGEgUmVjZWJlcikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU2MSA1MDEgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA1MDEgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDQ4NiBUbSAoMjkvMTAvMjAyMiAtIFZJU0EgRUxFQ1RST04pIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1MzAgNDg2IFRtICgxLjEzOSw5NCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA0ODYgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDQ3MSBUbSAoMjkvMTAvMjAyMiAtIFZFTkRBIEZBVFVSQURBKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTMwIDQ3MSBUbSAoMS4xNDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNDcxIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA0NTYgVG0gKFRvdGFsIGRlIENvbnRhcyBhIFJlY2ViZXIpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1MzAgNDU2IFRtICgyLjI3OSw5NCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA0NTYgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDQ0MSBUbSAoVmVuZGEgYSBWaXN0YSBM7XF1aWRhKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTMwIDQ0MSBUbSAoMi4yNzksODgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgNDQxIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSA0MjYgVG0gKFJlY2ViaW1lbnRvIGEgVmlzdGEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NDUgNDI2IFRtICgwLDAwKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDQyNiBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgNDEwIFRtIChSZWNlYmltZW50byBhIFByYXpvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTQ1IDQxMCBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyA0MTAgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDM5NSBUbSAoVG90YWwgZGUgUmVjZWJpbWVudG8gYSBWaXN0YSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDUzMCAzOTUgVG0gKDIuMjc5LDg4KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDM5NSBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgMzgwIFRtIChEZXNwZXNhcykgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU2MSAzODAgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyAzODAgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDM2NSBUbSAoVG90YWwgZGUgRGVzcGVzYXMpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NDUgMzY1IFRtICgwLDAwKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDM2NSBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgMzUwIFRtIChUcmFuc2ZlcmlkbyBwYXJhIGJhbmNvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTYxIDM1MCBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDM1MCBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgMzM1IFRtIChUb3RhbCBUcmFuc2ZlcmlkbyBwYXJhIGJhbmNvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTQ1IDMzNSBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyAzMzUgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDMyMCBUbSAoVHJhbnNmZXJpZG8gcGFyYSBUZXNvdXJhcmlhIC0gQmFuY28pIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NjEgMzIwIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgMzIwIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSAzMDUgVG0gKFRvdGFsIFRyYW5zZmVyaWRvIHBhcmEgVGVzb3VyYXJpYSAtIEJhbmNvKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTQ1IDMwNSBUbSAoMCwwMCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAyIDggVGYNCiAxIDAgMCAxIDQ4NyAzMDUgVG0gKCkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDMxIDI5MCBUbSAoVHJhbnNmZXJpZG8gcGFyYSBUZXNvdXJhcmlhIC0gQ2FpeGEpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSA1NjEgMjkwIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgMjkwIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSAzMSAyNzUgVG0gKENBSVhBIENPTVVNKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNTMwIDI3NSBUbSAoMi4yNzksODgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgMjc1IFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSAyNjAgVG0gKFRvdGFsIFRyYW5zZmVyaWRvIHBhcmEgVGVzb3VyYXJpYSAtIENhaXhhKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgNTMwIDI2MCBUbSAoMi4yNzksODgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgMjYwIFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAzMSAyNDUgVG0gKFRvdGFsIFRyYW5zZmVyaWRvIHBhcmEgVGVzb3VyYXJpYSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDUzMCAyNDUgVG0gKDIuMjc5LDg4KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDI0NSBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgMjMwIFRtIChUb3RhbCBkZSBUcmFuc2ZlcupuY2lhcykgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDUzMCAyMzAgVG0gKDIuMjc5LDg4KSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDIgOCBUZg0KIDEgMCAwIDEgNDg3IDIzMCBUbSAoKSBUag0KMC4wMCAwLjAwIDAuMDAgcmcNCi9GMDAgOCBUZg0KIDEgMCAwIDEgMzEgMjE1IFRtIChTb2JyYSkgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDU0NSAyMTUgVG0gKDAsMDApIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMiA4IFRmDQogMSAwIDAgMSA0ODcgMjE1IFRtICgpIFRqDQowLjAwIDAuMDAgMC4wMCByZw0KL0YwMCA4IFRmDQogMSAwIDAgMSAyOCAzMiBUbSAobWFya2thcikgVGoNCjAuMDAgMC4wMCAwLjAwIHJnDQovRjAwIDggVGYNCiAxIDAgMCAxIDQ4MyAzMiBUbSAobXJrfEZpbmFuY2UgLSAxLjMuMS4wKSBUag0KRVQNCmVuZHN0cmVhbQ0KZW5kb2JqDQo2IDAgb2JqDQo8PA0KL1R5cGUgL0ZvbnQNCi9TdWJ0eXBlIC9UcnVlVHlwZQ0KL05hbWUgL0YwMA0KL0Jhc2VGb250IC9BcmlhbCxCb2xkDQovRmlyc3RDaGFyIDANCi9MYXN0Q2hhciAyNTUNCi9XaWR0aHMgWyANCjc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggMjg1IDM0MSA0ODYgNTcwIDU3MCA5MTEgNzQwIDI0NCAzNDEgMzQxIDM5OSA1OTggMjg1IDM0MSAyODUgMjg1IDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCAzNDEgMzQxIDU5OCA1OTggNTk4IDYyNiA5OTkgNzQwIDc0MCA3NDAgNzQwIDY4MyA2MjYgNzk3IDc0MCAyODUgNTcwIDc0MCA2MjYgODUzIDc0MCA3OTcgNjgzIDc5NyA3NDAgNjgzIDYyNiA3NDAgNjgzIDk2NyA2ODMgNjgzIDYyNiAzNDEgMjg1IDM0MSA1OTggNTcwIDM0MSA1NzAgNjI2IDU3MCA2MjYgNTcwIDM0MSA2MjYgNjI2IDI4NSAyODUgNTcwIDI4NSA5MTEgNjI2IDYyNiA2MjYgNjI2IDM5OSA1NzAgMzQxIDYyNiA1NzAgNzk3IDU3MCA1NzAgNTEyIDM5OSAyODcgMzk5IDU5OCA3NjggNTcwIDc2OCAyODUgNTcwIDUxMiAxMDI0IDU3MCA1NzAgMzQxIDEwMjQgNjgzIDM0MSAxMDI0IDc2OCA2MjYgNzY4IDc2OCAyODUgMjg1IDUxMiA1MTIgMzU5IDU3MCAxMDI0IDM0MSAxMDI0IDU3MCAzNDEgOTY3IDc2OCA1MTIgNjgzIDI4NSAzNDEgNTcwIDU3MCA1NzAgNTcwIDI4NyA1NzAgMzQxIDc1NSAzNzkgNTcwIDU5OCAzNDEgNzU1IDU2NiA0MTAgNTYyIDM0MSAzNDEgMzQxIDU5MCA1NzAgMzQxIDM0MSAzNDEgMzc0IDU3MCA4NTQgODU0IDg1NCA2MjYgNzQwIDc0MCA3NDAgNzQwIDc0MCA3NDAgMTAyNCA3NDAgNjgzIDY4MyA2ODMgNjgzIDI4NSAyODUgMjg1IDI4NSA3NDAgNzQwIDc5NyA3OTcgNzk3IDc5NyA3OTcgNTk4IDc5NyA3NDAgNzQwIDc0MCA3NDAgNjgzIDY4MyA2MjYgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgOTExIDU3MCA1NzAgNTcwIDU3MCA1NzAgMjg1IDI4NSAyODUgMjg1IDYyNiA2MjYgNjI2IDYyNiA2MjYgNjI2IDYyNiA1NjIgNjI2IDYyNiA2MjYgNjI2IDYyNiA1NzAgNjI2IDU3MCAgXQ0KL0VuY29kaW5nICA8PC9UeXBlL0VuY29kaW5nIC9EaWZmZXJlbmNlcyBbIDIgL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL3NwYWNlL2V4Y2xhbS9xdW90ZWRibC9udW1iZXJzaWduL2RvbGxhci9wZXJjZW50L2FtcGVyc2FuZC9xdW90ZXNpbmdsZS9wYXJlbmxlZnQvcGFyZW5yaWdodC9hc3Rlcmlzay9wbHVzL2NvbW1hL2h5cGhlbi9wZXJpb2Qvc2xhc2gvemVyby9vbmUvdHdvL3RocmVlL2ZvdXIvZml2ZS9zaXgvc2V2ZW4vZWlnaHQvbmluZS9jb2xvbi9zZW1pY29sb24vbGVzcy9lcXVhbC9ncmVhdGVyL3F1ZXN0aW9uL2F0L0EvQi9DL0QvRS9GL0cvSC9JL0ovSy9ML00vTi9PL1AvUS9SL1MvVC9VL1YvVy9YL1kvWi9icmFja2V0bGVmdC9iYWNrc2xhc2gvYnJhY2tldHJpZ2h0L2FzY2lpY2lyY3VtL3VuZGVyc2NvcmUvZ3JhdmUvYS9iL2MvZC9lL2YvZy9oL2kvai9rL2wvbS9uL28vcC9xL3Ivcy90L3Uvdi93L3gveS96L2JyYWNlbGVmdC9iYXIvYnJhY2VyaWdodC9hc2NpaXRpbGRlL3NwYWNlL0V1cm8vc3BhY2UvcXVvdGVzaW5nbGJhc2UvZmxvcmluL3F1b3RlZGJsYmFzZS9lbGxpcHNpcy9kYWdnZXIvZGFnZ2VyZGJsL2NpcmN1bWZsZXgvcGVydGhvdXNhbmQvU2Nhcm9uL2d1aWxzaW5nbGxlZnQvT0Uvc3BhY2UvWmNhcm9uL3NwYWNlL3NwYWNlL3F1b3RlbGVmdC9xdW90ZXJpZ2h0L3F1b3RlZGJsbGVmdC9xdW90ZWRibHJpZ2h0L2J1bGxldC9lbmRhc2gvZW1kYXNoL3RpbGRlL3RyYWRlbWFyay9zY2Fyb24vZ3VpbHNpbmdscmlnaHQvb2Uvc3BhY2UvemNhcm9uL1lkaWVyZXNpcy9zcGFjZS9leGNsYW1kb3duL2NlbnQvc3RlcmxpbmcvY3VycmVuY3kveWVuL2Jyb2tlbmJhci9zZWN0aW9uL2RpZXJlc2lzL2NvcHlyaWdodC9vcmRmZW1pbmluZS9ndWlsbGVtb3RsZWZ0L2xvZ2ljYWxub3QvaHlwaGVuL3JlZ2lzdGVyZWQvbWFjcm9uL2RlZ3JlZS9wbHVzbWludXMvdHdvc3VwZXJpb3IvdGhyZWVzdXBlcmlvci9hY3V0ZS9tdS9wYXJhZ3JhcGgvcGVyaW9kY2VudGVyZWQvY2VkaWxsYS9vbmVzdXBlcmlvci9vcmRtYXNjdWxpbmUvZ3VpbGxlbW90cmlnaHQvb25lcXVhcnRlci9vbmVoYWxmL3RocmVlcXVhcnRlcnMvcXVlc3Rpb25kb3duL0FncmF2ZS9BYWN1dGUvQWNpcmN1bWZsZXgvQXRpbGRlL0FkaWVyZXNpcy9BcmluZy9BRS9DY2VkaWxsYS9FZ3JhdmUvRWFjdXRlL0VjaXJjdW1mbGV4L0VkaWVyZXNpcy9JZ3JhdmUvSWFjdXRlL0ljaXJjdW1mbGV4L0lkaWVyZXNpcy9FdGgvTnRpbGRlL09ncmF2ZS9PYWN1dGUvT2NpcmN1bWZsZXgvT3RpbGRlL09kaWVyZXNpcy9tdWx0aXBseS9Pc2xhc2gvVWdyYXZlL1VhY3V0ZS9VY2lyY3VtZmxleC9VZGllcmVzaXMvWWFjdXRlL1Rob3JuL2dlcm1hbmRibHMvYWdyYXZlL2FhY3V0ZS9hY2lyY3VtZmxleC9hdGlsZGUvYWRpZXJlc2lzL2FyaW5nL2FlL2NjZWRpbGxhL2VncmF2ZS9lYWN1dGUvZWNpcmN1bWZsZXgvZWRpZXJlc2lzL2lncmF2ZS9pYWN1dGUvaWNpcmN1bWZsZXgvaWRpZXJlc2lzL2V0aC9udGlsZGUvb2dyYXZlL29hY3V0ZS9vY2lyY3VtZmxleC9vdGlsZGUvb2RpZXJlc2lzL2RpdmlkZS9vc2xhc2gvdWdyYXZlL3VhY3V0ZS91Y2lyY3VtZmxleC91ZGllcmVzaXMveWFjdXRlL3Rob3JuL3lkaWVyZXNpc10+Pg0KL0ZvbnREZXNjcmlwdG9yIDcgMCBSDQo+Pg0KZW5kb2JqDQo3IDAgb2JqDQo8PA0KL1R5cGUgL0ZvbnREZXNjcmlwdG9yDQovQXNjZW50IDc0Ng0KL0Rlc2NlbnQgLTIxNg0KL0ZsYWdzIDMyDQovRm9udEJCb3ggWyAtMTI4NiAtNzcxIDQwOTYgMjE2MiBdDQovRm9udE5hbWUgL0YwMA0KL0l0YWxpY0FuZ2xlIDANCj4+DQplbmRvYmoNCjggMCBvYmoNCjw8DQovVHlwZSAvRm9udA0KL1N1YnR5cGUgL1RydWVUeXBlDQovTmFtZSAvRjAxDQovQmFzZUZvbnQgL0FyaWFsLEl0YWxpYw0KL0ZpcnN0Q2hhciAwDQovTGFzdENoYXIgMjU1DQovV2lkdGhzIFsgDQo3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDI4NSAyODUgMzY0IDU3MCA1NzAgOTExIDY4MyAxOTYgMzQxIDM0MSAzOTkgNTk4IDI4NSAzNDEgMjg1IDI4NSA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgMjg1IDI4NSA1OTggNTk4IDU5OCA1NzAgMTA0MCA2ODMgNjgzIDc0MCA3NDAgNjgzIDYyNiA3OTcgNzQwIDI4NSA1MTIgNjgzIDU3MCA4NTMgNzQwIDc5NyA2ODMgNzk3IDc0MCA2ODMgNjI2IDc0MCA2ODMgOTY3IDY4MyA2ODMgNjI2IDI4NSAyODUgMjg1IDQ4MSA1NzAgMzQxIDU3MCA1NzAgNTEyIDU3MCA1NzAgMjg1IDU3MCA1NzAgMjI4IDIyOCA1MTIgMjI4IDg1MyA1NzAgNTcwIDU3MCA1NzAgMzQxIDUxMiAyODUgNTcwIDUxMiA3NDAgNTEyIDUxMiA1MTIgMzQyIDI2NiAzNDIgNTk4IDc2OCA1NzAgNzY4IDIyOCA1NzAgMzQxIDEwMjQgNTcwIDU3MCAzNDEgMTAyNCA2ODMgMzQxIDEwMjQgNzY4IDYyNiA3NjggNzY4IDIyOCAyMjggMzQxIDM0MSAzNTkgNTcwIDEwMjQgMzQxIDEwMjQgNTEyIDM0MSA5NjcgNzY4IDUxMiA2ODMgMjg1IDM0MSA1NzAgNTcwIDU3MCA1NzAgMjY2IDU3MCAzNDEgNzU1IDM3OSA1NzAgNTk4IDM0MSA3NTUgNTY2IDQxMCA1NjIgMzQxIDM0MSAzNDEgNTkwIDU1MCAzNDEgMzQxIDM0MSAzNzQgNTcwIDg1NCA4NTQgODU0IDYyNiA2ODMgNjgzIDY4MyA2ODMgNjgzIDY4MyAxMDI0IDc0MCA2ODMgNjgzIDY4MyA2ODMgMjg1IDI4NSAyODUgMjg1IDc0MCA3NDAgNzk3IDc5NyA3OTcgNzk3IDc5NyA1OTggNzk3IDc0MCA3NDAgNzQwIDc0MCA2ODMgNjgzIDYyNiA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA5MTEgNTEyIDU3MCA1NzAgNTcwIDU3MCAyODUgMjg1IDI4NSAyODUgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU2MiA2MjYgNTcwIDU3MCA1NzAgNTcwIDUxMiA1NzAgNTEyICBdDQovRW5jb2RpbmcgIDw8L1R5cGUvRW5jb2RpbmcgL0RpZmZlcmVuY2VzIFsgMiAvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2Uvc3BhY2UvZXhjbGFtL3F1b3RlZGJsL251bWJlcnNpZ24vZG9sbGFyL3BlcmNlbnQvYW1wZXJzYW5kL3F1b3Rlc2luZ2xlL3BhcmVubGVmdC9wYXJlbnJpZ2h0L2FzdGVyaXNrL3BsdXMvY29tbWEvaHlwaGVuL3BlcmlvZC9zbGFzaC96ZXJvL29uZS90d28vdGhyZWUvZm91ci9maXZlL3NpeC9zZXZlbi9laWdodC9uaW5lL2NvbG9uL3NlbWljb2xvbi9sZXNzL2VxdWFsL2dyZWF0ZXIvcXVlc3Rpb24vYXQvQS9CL0MvRC9FL0YvRy9IL0kvSi9LL0wvTS9OL08vUC9RL1IvUy9UL1UvVi9XL1gvWS9aL2JyYWNrZXRsZWZ0L2JhY2tzbGFzaC9icmFja2V0cmlnaHQvYXNjaWljaXJjdW0vdW5kZXJzY29yZS9ncmF2ZS9hL2IvYy9kL2UvZi9nL2gvaS9qL2svbC9tL24vby9wL3Evci9zL3QvdS92L3cveC95L3ovYnJhY2VsZWZ0L2Jhci9icmFjZXJpZ2h0L2FzY2lpdGlsZGUvc3BhY2UvRXVyby9zcGFjZS9xdW90ZXNpbmdsYmFzZS9mbG9yaW4vcXVvdGVkYmxiYXNlL2VsbGlwc2lzL2RhZ2dlci9kYWdnZXJkYmwvY2lyY3VtZmxleC9wZXJ0aG91c2FuZC9TY2Fyb24vZ3VpbHNpbmdsbGVmdC9PRS9zcGFjZS9aY2Fyb24vc3BhY2Uvc3BhY2UvcXVvdGVsZWZ0L3F1b3RlcmlnaHQvcXVvdGVkYmxsZWZ0L3F1b3RlZGJscmlnaHQvYnVsbGV0L2VuZGFzaC9lbWRhc2gvdGlsZGUvdHJhZGVtYXJrL3NjYXJvbi9ndWlsc2luZ2xyaWdodC9vZS9zcGFjZS96Y2Fyb24vWWRpZXJlc2lzL3NwYWNlL2V4Y2xhbWRvd24vY2VudC9zdGVybGluZy9jdXJyZW5jeS95ZW4vYnJva2VuYmFyL3NlY3Rpb24vZGllcmVzaXMvY29weXJpZ2h0L29yZGZlbWluaW5lL2d1aWxsZW1vdGxlZnQvbG9naWNhbG5vdC9oeXBoZW4vcmVnaXN0ZXJlZC9tYWNyb24vZGVncmVlL3BsdXNtaW51cy90d29zdXBlcmlvci90aHJlZXN1cGVyaW9yL2FjdXRlL211L3BhcmFncmFwaC9wZXJpb2RjZW50ZXJlZC9jZWRpbGxhL29uZXN1cGVyaW9yL29yZG1hc2N1bGluZS9ndWlsbGVtb3RyaWdodC9vbmVxdWFydGVyL29uZWhhbGYvdGhyZWVxdWFydGVycy9xdWVzdGlvbmRvd24vQWdyYXZlL0FhY3V0ZS9BY2lyY3VtZmxleC9BdGlsZGUvQWRpZXJlc2lzL0FyaW5nL0FFL0NjZWRpbGxhL0VncmF2ZS9FYWN1dGUvRWNpcmN1bWZsZXgvRWRpZXJlc2lzL0lncmF2ZS9JYWN1dGUvSWNpcmN1bWZsZXgvSWRpZXJlc2lzL0V0aC9OdGlsZGUvT2dyYXZlL09hY3V0ZS9PY2lyY3VtZmxleC9PdGlsZGUvT2RpZXJlc2lzL211bHRpcGx5L09zbGFzaC9VZ3JhdmUvVWFjdXRlL1VjaXJjdW1mbGV4L1VkaWVyZXNpcy9ZYWN1dGUvVGhvcm4vZ2VybWFuZGJscy9hZ3JhdmUvYWFjdXRlL2FjaXJjdW1mbGV4L2F0aWxkZS9hZGllcmVzaXMvYXJpbmcvYWUvY2NlZGlsbGEvZWdyYXZlL2VhY3V0ZS9lY2lyY3VtZmxleC9lZGllcmVzaXMvaWdyYXZlL2lhY3V0ZS9pY2lyY3VtZmxleC9pZGllcmVzaXMvZXRoL250aWxkZS9vZ3JhdmUvb2FjdXRlL29jaXJjdW1mbGV4L290aWxkZS9vZGllcmVzaXMvZGl2aWRlL29zbGFzaC91Z3JhdmUvdWFjdXRlL3VjaXJjdW1mbGV4L3VkaWVyZXNpcy95YWN1dGUvdGhvcm4veWRpZXJlc2lzXT4+DQovRm9udERlc2NyaXB0b3IgOSAwIFINCj4+DQplbmRvYmoNCjkgMCBvYmoNCjw8DQovVHlwZSAvRm9udERlc2NyaXB0b3INCi9Bc2NlbnQgNzQ2DQovRGVzY2VudCAtMjEzDQovRmxhZ3MgMzINCi9Gb250QkJveCBbIC0xMDU5IC02NjUgMjc4MyAyMDQzIF0NCi9Gb250TmFtZSAvRjAxDQovSXRhbGljQW5nbGUgLTEyMA0KPj4NCmVuZG9iag0KMTAgMCBvYmoNCjw8DQovVHlwZSAvRm9udA0KL1N1YnR5cGUgL1RydWVUeXBlDQovTmFtZSAvRjAyDQovQmFzZUZvbnQgL0FyaWFsDQovRmlyc3RDaGFyIDANCi9MYXN0Q2hhciAyNTUNCi9XaWR0aHMgWyANCjc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggNzY4IDc2OCA3NjggMjg1IDI4NSAzNjQgNTcwIDU3MCA5MTEgNjgzIDE5NiAzNDEgMzQxIDM5OSA1OTggMjg1IDM0MSAyODUgMjg1IDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCAyODUgMjg1IDU5OCA1OTggNTk4IDU3MCAxMDQwIDY4MyA2ODMgNzQwIDc0MCA2ODMgNjI2IDc5NyA3NDAgMjg1IDUxMiA2ODMgNTcwIDg1MyA3NDAgNzk3IDY4MyA3OTcgNzQwIDY4MyA2MjYgNzQwIDY4MyA5NjcgNjgzIDY4MyA2MjYgMjg1IDI4NSAyODUgNDgxIDU3MCAzNDEgNTcwIDU3MCA1MTIgNTcwIDU3MCAyODUgNTcwIDU3MCAyMjggMjI4IDUxMiAyMjggODUzIDU3MCA1NzAgNTcwIDU3MCAzNDEgNTEyIDI4NSA1NzAgNTEyIDc0MCA1MTIgNTEyIDUxMiAzNDIgMjY2IDM0MiA1OTggNzY4IDU3MCA3NjggMjI4IDU3MCAzNDEgMTAyNCA1NzAgNTcwIDM0MSAxMDI0IDY4MyAzNDEgMTAyNCA3NjggNjI2IDc2OCA3NjggMjI4IDIyOCAzNDEgMzQxIDM1OSA1NzAgMTAyNCAzNDEgMTAyNCA1MTIgMzQxIDk2NyA3NjggNTEyIDY4MyAyODUgMzQxIDU3MCA1NzAgNTcwIDU3MCAyNjYgNTcwIDM0MSA3NTUgMzc5IDU3MCA1OTggMzQxIDc1NSA1NjYgNDEwIDU2MiAzNDEgMzQxIDM0MSA1OTAgNTUwIDM0MSAzNDEgMzQxIDM3NCA1NzAgODU0IDg1NCA4NTQgNjI2IDY4MyA2ODMgNjgzIDY4MyA2ODMgNjgzIDEwMjQgNzQwIDY4MyA2ODMgNjgzIDY4MyAyODUgMjg1IDI4NSAyODUgNzQwIDc0MCA3OTcgNzk3IDc5NyA3OTcgNzk3IDU5OCA3OTcgNzQwIDc0MCA3NDAgNzQwIDY4MyA2ODMgNjI2IDU3MCA1NzAgNTcwIDU3MCA1NzAgNTcwIDkxMSA1MTIgNTcwIDU3MCA1NzAgNTcwIDI4NSAyODUgMjg1IDI4NSA1NzAgNTcwIDU3MCA1NzAgNTcwIDU3MCA1NzAgNTYyIDYyNiA1NzAgNTcwIDU3MCA1NzAgNTEyIDU3MCA1MTIgIF0NCi9FbmNvZGluZyAgPDwvVHlwZS9FbmNvZGluZyAvRGlmZmVyZW5jZXMgWyAyIC9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9zcGFjZS9leGNsYW0vcXVvdGVkYmwvbnVtYmVyc2lnbi9kb2xsYXIvcGVyY2VudC9hbXBlcnNhbmQvcXVvdGVzaW5nbGUvcGFyZW5sZWZ0L3BhcmVucmlnaHQvYXN0ZXJpc2svcGx1cy9jb21tYS9oeXBoZW4vcGVyaW9kL3NsYXNoL3plcm8vb25lL3R3by90aHJlZS9mb3VyL2ZpdmUvc2l4L3NldmVuL2VpZ2h0L25pbmUvY29sb24vc2VtaWNvbG9uL2xlc3MvZXF1YWwvZ3JlYXRlci9xdWVzdGlvbi9hdC9BL0IvQy9EL0UvRi9HL0gvSS9KL0svTC9NL04vTy9QL1EvUi9TL1QvVS9WL1cvWC9ZL1ovYnJhY2tldGxlZnQvYmFja3NsYXNoL2JyYWNrZXRyaWdodC9hc2NpaWNpcmN1bS91bmRlcnNjb3JlL2dyYXZlL2EvYi9jL2QvZS9mL2cvaC9pL2ovay9sL20vbi9vL3AvcS9yL3MvdC91L3Yvdy94L3kvei9icmFjZWxlZnQvYmFyL2JyYWNlcmlnaHQvYXNjaWl0aWxkZS9zcGFjZS9FdXJvL3NwYWNlL3F1b3Rlc2luZ2xiYXNlL2Zsb3Jpbi9xdW90ZWRibGJhc2UvZWxsaXBzaXMvZGFnZ2VyL2RhZ2dlcmRibC9jaXJjdW1mbGV4L3BlcnRob3VzYW5kL1NjYXJvbi9ndWlsc2luZ2xsZWZ0L09FL3NwYWNlL1pjYXJvbi9zcGFjZS9zcGFjZS9xdW90ZWxlZnQvcXVvdGVyaWdodC9xdW90ZWRibGxlZnQvcXVvdGVkYmxyaWdodC9idWxsZXQvZW5kYXNoL2VtZGFzaC90aWxkZS90cmFkZW1hcmsvc2Nhcm9uL2d1aWxzaW5nbHJpZ2h0L29lL3NwYWNlL3pjYXJvbi9ZZGllcmVzaXMvc3BhY2UvZXhjbGFtZG93bi9jZW50L3N0ZXJsaW5nL2N1cnJlbmN5L3llbi9icm9rZW5iYXIvc2VjdGlvbi9kaWVyZXNpcy9jb3B5cmlnaHQvb3JkZmVtaW5pbmUvZ3VpbGxlbW90bGVmdC9sb2dpY2Fsbm90L2h5cGhlbi9yZWdpc3RlcmVkL21hY3Jvbi9kZWdyZWUvcGx1c21pbnVzL3R3b3N1cGVyaW9yL3RocmVlc3VwZXJpb3IvYWN1dGUvbXUvcGFyYWdyYXBoL3BlcmlvZGNlbnRlcmVkL2NlZGlsbGEvb25lc3VwZXJpb3Ivb3JkbWFzY3VsaW5lL2d1aWxsZW1vdHJpZ2h0L29uZXF1YXJ0ZXIvb25laGFsZi90aHJlZXF1YXJ0ZXJzL3F1ZXN0aW9uZG93bi9BZ3JhdmUvQWFjdXRlL0FjaXJjdW1mbGV4L0F0aWxkZS9BZGllcmVzaXMvQXJpbmcvQUUvQ2NlZGlsbGEvRWdyYXZlL0VhY3V0ZS9FY2lyY3VtZmxleC9FZGllcmVzaXMvSWdyYXZlL0lhY3V0ZS9JY2lyY3VtZmxleC9JZGllcmVzaXMvRXRoL050aWxkZS9PZ3JhdmUvT2FjdXRlL09jaXJjdW1mbGV4L090aWxkZS9PZGllcmVzaXMvbXVsdGlwbHkvT3NsYXNoL1VncmF2ZS9VYWN1dGUvVWNpcmN1bWZsZXgvVWRpZXJlc2lzL1lhY3V0ZS9UaG9ybi9nZXJtYW5kYmxzL2FncmF2ZS9hYWN1dGUvYWNpcmN1bWZsZXgvYXRpbGRlL2FkaWVyZXNpcy9hcmluZy9hZS9jY2VkaWxsYS9lZ3JhdmUvZWFjdXRlL2VjaXJjdW1mbGV4L2VkaWVyZXNpcy9pZ3JhdmUvaWFjdXRlL2ljaXJjdW1mbGV4L2lkaWVyZXNpcy9ldGgvbnRpbGRlL29ncmF2ZS9vYWN1dGUvb2NpcmN1bWZsZXgvb3RpbGRlL29kaWVyZXNpcy9kaXZpZGUvb3NsYXNoL3VncmF2ZS91YWN1dGUvdWNpcmN1bWZsZXgvdWRpZXJlc2lzL3lhY3V0ZS90aG9ybi95ZGllcmVzaXNdPj4NCi9Gb250RGVzY3JpcHRvciAxMSAwIFINCj4+DQplbmRvYmoNCjExIDAgb2JqDQo8PA0KL1R5cGUgL0ZvbnREZXNjcmlwdG9yDQovQXNjZW50IDc0Ng0KL0Rlc2NlbnQgLTIxNg0KL0ZsYWdzIDMyDQovRm9udEJCb3ggWyAtMTM2MSAtNjY1IDQwOTYgMjEyOSBdDQovRm9udE5hbWUgL0YwMg0KL0l0YWxpY0FuZ2xlIDANCj4+DQplbmRvYmoNCjEyIDAgb2JqDQo8PA0KL0NyZWF0aW9uRGF0ZSAoMjgvMTAvMjAyMiAxNDo0MjoxOCkNCi9Qcm9kdWNlciAoUXVpY2tSZXBvcnRzIFBERiBFeHBvcnQpDQovU3ViamVjdCAoICkNCi9DcmVhdG9yIChRdWlja1JlcG9ydHMpDQovVGl0bGUgKCkNCi9BdXRob3IgKCkNCj4+DQplbmRvYmoNCjEzIDAgb2JqDQpbL1BERiAvVGV4dF0NCmVuZG9iag0KeHJlZg0KMCAxNA0KMDAwMDAwMDAwMCA2NTUzNSBmDQowMDAwMDAwMDE3IDAwMDAwIG4NCjAwMDAwMDAxNTAgMDAwMDAgbg0KMDAwMDAwMDIwMiAwMDAwMCBuDQowMDAwMDAwMzkxIDAwMDAwIG4NCjAwMDAwMDA0ODYgMDAwMDAgbg0KMDAwMDAxMzcxMiAwMDAwMCBuDQowMDAwMDE2Njg1IDAwMDAwIG4NCjAwMDAwMTY4NDAgMDAwMDAgbg0KMDAwMDAxOTgxNiAwMDAwMCBuDQowMDAwMDE5OTc0IDAwMDAwIG4NCjAwMDAwMjI5NDUgMDAwMDAgbg0KMDAwMDAyMzEwMSAwMDAwMCBuDQowMDAwMDIzMjYzIDAwMDAwIG4NCnRyYWlsZXINCjw8DQovU2l6ZSAxNA0KL1Jvb3QgMSAwIFINCi9JbmZvIDEyIDAgUg0KPj4NCnN0YXJ0eHJlZg0KMjMyOTUNCiUlRU9GDQo=';

    const downloadPDF = async (href) => {
      const downloadLink = document.createElement('a');
      downloadLink.href = href;
      downloadLink.download = 'teste.pdf';
      downloadLink.click();
    };

    alert(isPlatform('pwa'));

    if(isPlatform('mobileweb')){
      downloadPDF(data);
    } else {
      this.saveAndOpenPdf(data, 'teste');
    }
  }
  saveAndOpenPdf(pdf: string, filename: string) {
    const writeDirectory = isPlatform('ios') ? this.file.dataDirectory : this.file.externalDataDirectory;
    this.file.writeFile(writeDirectory, filename, this.convertBase64ToBlob(pdf, 'data:application/pdf;base64'), {replace: true})
      .then(async () => {
        if(isPlatform('android')){
          await Browser.open({ url: writeDirectory + filename, toolbarColor: '#222428' }).catch(() => {alert('Error opening pdf file');});
        }else {
          this.opener.open(writeDirectory + filename, 'application/pdf').catch(() => {alert('Error opening pdf file');});
        }
      }).catch(() => {console.error('Error writing pdf file');});
  }

  convertBase64ToBlob(b64Data, contentType): Blob {
    contentType = contentType || '';
    const sliceSize = 512;
    b64Data = b64Data.replace(/^[^,]+,/, '');
    b64Data = b64Data.replace(/\s/g, '');
    const byteCharacters = window.atob(b64Data);
    const byteArrays = [];
    for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {
         const slice = byteCharacters.slice(offset, offset + sliceSize);
         const byteNumbers = new Array(slice.length);
         for (let i = 0; i < slice.length; i++) {
             byteNumbers[i] = slice.charCodeAt(i);
         }
         const byteArray = new Uint8Array(byteNumbers);
         byteArrays.push(byteArray);
    }
   return new Blob(byteArrays, {type: contentType});
}

  async ionViewWillEnter() {
    this.menu.enable(true, 'homeMenu');
    //loadStorage
    this.auth = await this.storage.get('auth');
    if (this.auth === null || this.auth === undefined) {
      this.navCtrl.pop();
      this.router.navigateByUrl('/login', { replaceUrl: true });
    }
    this.faturamentoStorage = await this.storage.get('faturamento');
    this.multiEmpresaStorage = await this.storage.get('multiEmpresa');
    this.appConfigStorage = await this.storage.get('appConfig');
    //Set Menu
    this.menu.enable(true, 'homeMenu');
    this.displayUnidades = false;
    //Set Loaders
    this.dateLoader = false;
    this.dateLoaderTotal = false;
    this.contentLoader = false;
    //Error Prevention
    if (this.faturamentoStorage.configuracoes.unidadesCheck === undefined) {
      this.faturamentoStorage.configuracoes.unidadesCheck = {};
    }
    if ((await this.storage.get('multiEmpresa')) === null) {
      await this.storage.set('multiEmpresa', { empresas: {} });
    }
    if (
      this.faturamentoStorage.configuracoes.header.intervalo === undefined ||
      this.faturamentoStorage.configuracoes.header.intervalo === null ||
      this.faturamentoStorage.configuracoes.header.intervalo === '' ||
      this.faturamentoStorage.configuracoes.header.intervalo === 'on'
    ) {
      this.faturamentoStorage.configuracoes.header.intervalo = 'month';
      await this.storage.set('faturamento', this.faturamentoStorage);
    }
    if (
      this.faturamentoStorage.configuracoes.centrodecustos.intervalo ===
        undefined ||
      this.faturamentoStorage.configuracoes.centrodecustos.intervalo === null ||
      this.faturamentoStorage.configuracoes.centrodecustos.intervalo === '' ||
      this.faturamentoStorage.configuracoes.centrodecustos.intervalo === 'on'
    ) {
      this.faturamentoStorage.configuracoes.centrodecustos.intervalo = 'day';
      await this.storage.set('faturamento', this.faturamentoStorage);
    }
    //Set CheckBox
    this.unidadesCheck = this.faturamentoStorage.unidadesCheck;
    this.multiempresa = this.multiEmpresaStorage;
    this.empresa = this.appConfigStorage.empresaAtual;
    //Set Preferences
    this.mask = this.faturamentoStorage.configuracoes.gerais.mask;
    this.cmvPerc = this.faturamentoStorage.configuracoes.gerais.cmvPerc;
    if (this.cmvPerc === true) {
      this.perc = '%';
    }
    if (this.cmvPerc === false) {
      this.perc = '';
    }
    this.intervalHeader =
      this.faturamentoStorage.configuracoes.header.intervalo;
    if (this.intervalHeader === 'day') {
      this.fatHeaderTime = 'diario';
    } else if (this.intervalHeader === 'month') {
      this.fatHeaderTime = 'Mensal';
    } else if (this.intervalHeader === 'year') {
      this.fatHeaderTime = 'Anual';
      this.displayInterval = 'none';
    } else if (this.intervalHeader === 'all') {
      this.fatHeaderTime = 'Todos';
    } else {
      this.fatHeaderTime = '';
    }
    this.valueGraficoInterval =
      this.faturamentoStorage.configuracoes.grafico.intervalo;
    this.valueGraficoIntervalFilter = this.valueGraficoInterval;
    //Set Dates and Filter Default
    this.interval = 'day';
    this.displayInterval = 'none';
    this.displayDay = 'block';
    this.dateTimeDay = { confirm: () => {} };
    this.dateTimeFinish = { confirm: () => {} };
    this.dateTimeInit = { confirm: () => {} };
    this.dateValueInit = this.maxDate;
    this.dateValueFinish = this.maxDate;
    this.dateValueDay = this.maxDate;
    this.dateValueInitFormat = format(parseISO(this.maxDate), 'dd/MM/yyyy');
    this.dateValueFinishFormat = format(parseISO(this.maxDate), 'dd/MM/yyyy');
    this.dateValueDayFormat = format(parseISO(this.maxDate), 'dd/MM/yyyy');
    //Login Validation
    this.valFLogin = this.appConfigStorage.firstOpen;
    this.valCnpj = this.auth.empresa.cnpj;
    this.valToken = this.auth.empresa.token;
    this.valIdToken = this.auth.empresa.id;
    this.valLogin = this.auth.usuario.login;
    this.valTokenUsuario = this.auth.usuario.token;
    if (
      this.valFLogin !== false ||
      this.valTokenUsuario === null ||
      this.valTokenUsuario === undefined
    ) {
      this.router.navigateByUrl('/login', { replaceUrl: true });
    } else if (
      this.valLogin !== null &&
      this.valTokenUsuario !== null &&
      this.valCnpj !== null &&
      this.valToken !== null &&
      this.valIdToken !== null
    ) {
      this.headerFat(this.intervalHeader);
      this.unidadeFatTotal();
    }
  }

  //Faturamento
  headerFat(interval) {
    if (interval === '' || interval === 'on' || interval === null) {
      interval = 'month';
    }
    const interfaceHFat = {
      interval,
      date: '',
      cmvPercentage: this.cmvPerc.toString(),
      dateInit: null,
      dateFinish: null,
      fourMonths: this.valueGraficoInterval,
    };
    this.lojas.faturamento(interfaceHFat, this.valTokenUsuario).subscribe(
      (response: any) => {
        if (response.connection.error === 'invalidToken') {
          this.error('invalidToken');
        } else if (response.connection.error === 'databaseError') {
          this.error('serverdb');
        } else if (response.connection.status === 'success') {
          const grafico = response['MonthlyBillingForFourMonths'];
          this.unidadesHeader = Object.values(response['totalBilling']);
          const unidades = this.unidadesHeader;
          const somaFatArray = [];
          const somaMargemArray = [];
          const somaCMVrray = [];
          this.chartData = [];
          this.chartlabels = [];
          let n = 1;
          for (const unidade of unidades) {
            somaFatArray.push(parseFloat(unidade['somaFat']));
            this.qntCC = somaFatArray.length;
            somaMargemArray.push(parseFloat(unidade['somaMargem']));
            somaCMVrray.push(parseFloat(unidade['cmv_vlr']));
            n = n - 0.15;
            const color = 'rgba(255, 159, 25,' + n + ')';
            this.chartData.push({
              data: [],
              label: unidade['unidade'],
              backgroundColor: color,
              borderColor: color,
              hoverBackgroundColor: 'rgba(255, 159, 25, 1)',
            });
            for (const faturamento of Object.values(
              grafico[unidade['unidade']]
            )) {
              this.chartData[this.chartData.length - 1].data.push(
                faturamento['faturamento']
              );
            }
          }
          if (this.valueGraficoInterval === 'lastFourMonths') {
            this.titleGra = 'Últimos quatro meses';
          } else if (this.valueGraficoInterval === 'fourMonths') {
            this.titleGra = 'Quadrimestre';
          } else if (this.valueGraficoInterval === '1FourMonth') {
            this.titleGra = '1º Quadrimestre';
          } else if (this.valueGraficoInterval === '2FourMonth') {
            this.titleGra = '2º Quadrimestre';
          } else if (this.valueGraficoInterval === '3FourMonth') {
            this.titleGra = '3º Quadrimestre';
          }
          //this.chartOptions.plugins.title.text = `Gráfico de Faturamento ( ${this.titleGra} )`;
          for (const unidadeGRF of Object.values(
            grafico[unidades[0]['unidade']]
          )) {
            this.chartlabels.push(this.month[unidadeGRF['month'] - 1]);
            this.chart.chart.update();
          }
          const prepareRealFat = somaFatArray.reduce(somaArray, 0);
          const prepareRealMargem = somaMargemArray.reduce(somaArray, 0);
          let prepareRealCMV =
            somaCMVrray.reduce(somaArray, 0) / somaCMVrray.length;
          if (!this.cmvPerc) {
            prepareRealCMV = somaCMVrray.reduce(somaArray, 0);
          }
          // eslint-disable-next-line prefer-arrow/prefer-arrow-functions
          function somaArray(total: any, numero: any): any {
            return total + numero;
          }
          if (this.mask === true) {
            this.somaFatHeader = prepareRealFat.toLocaleString('pt-br', {
              style: 'currency',
              currency: 'BRL',
            });
            this.somaMargemHeader = prepareRealMargem.toLocaleString('pt-br', {
              style: 'currency',
              currency: 'BRL',
            });
            if (this.cmvPerc === true) {
              this.somaCMVHeader = prepareRealCMV.toFixed(2).toString();
            } else if (this.cmvPerc === false) {
              this.somaCMVHeader = prepareRealCMV.toLocaleString('pt-br', {
                style: 'currency',
                currency: 'BRL',
              });
            }
            this.contentLoader = true;
          } else {
            this.somaFatHeader = this.formatReall(prepareRealFat.toFixed(2));
            this.somaMargemHeader = this.formatReall(
              prepareRealMargem.toFixed(2)
            );
            if (this.cmvPerc === true) {
              this.somaCMVHeader = prepareRealCMV.toFixed(2).toString();
            } else if (this.cmvPerc === false) {
              this.somaCMVHeader = this.formatReall(
                prepareRealCMV.toFixed(2)
              ).toString();
            }
            this.contentLoader = true;
          }
        } else {
          this.error('');
        }
      },
      async (error) => {
        if (typeof error.error.connection == 'undefined') {
          this.error(error.error);
        } else {
          this.error('');
        }
      }
    );
  }
  async unidadeFatTotal() {
    const dayFat = {
      interval: this.interval,
      date: this.dateValueDay,
      cmvPercentage: this.cmvPerc.toString(),
      dateInit: this.dateValueInit,
      dateFinish: this.dateValueFinish,
      fourMonths: this.valueGraficoInterval,
    };
    this.lojas.faturamento(dayFat, this.valTokenUsuario).subscribe(
      async (response: any) => {
        if (response.connection.status === 'success') {
          const unidades = response;
          this.unidadesFat = Object.values(response['totalBilling']);
          const unidadesFat = this.unidadesFat;
          let somaFatArray = [];
          let somaMargemArray = [];
          let somaCMVrray = [];
          const unidadesCheck = {};
          const multiempresa = {};
          if (
            !this.unidadesCheck.hasOwnProperty(this.valIdToken) ||
            Object.values(this.unidadesCheck[this.valIdToken]).length !==
              unidadesFat.length
          ) {
            for (const unidade of unidadesFat) {
              somaFatArray = [];
              somaMargemArray = [];
              somaCMVrray = [];
              somaFatArray.push(parseFloat(unidade['somaFat']));
              somaMargemArray.push(parseFloat(unidade['somaMargem']));
              somaCMVrray.push(parseFloat(unidade['cmv_vlr']));
              unidadesCheck[unidade['idCentroCusto']] = {
                unidade: unidade['unidade'],
                check: true,
                display: 'block',
              };
              this.unidadesCheck[this.valIdToken] = unidadesCheck;
              this.faturamentoStorage.unidadesCheck = this.unidadesCheck;
              await this.storage.set('faturamento', this.faturamentoStorage);
            }
          } else {
            let n = 1;
            for (const unidade of unidadesFat) {
              n = n - 0.15;
              const color = 'rgba(255, 159, 25,' + n + ')';
              somaFatArray.push(parseFloat(unidade['somaFat']));
              this.qntCC = somaFatArray.length;
              somaMargemArray.push(parseFloat(unidade['somaMargem']));
              somaCMVrray.push(parseFloat(unidade['cmv_vlr']));
            }
          }
          if (
            !this.multiempresa.hasOwnProperty(this.valIdToken) ||
            unidadesFat[0]['ultimaExportacao'] !==
              Object.values(this.multiempresa[this.valIdToken])[0][
                'ultimaExportacao'
              ]
          ) {
            somaFatArray = [];
            somaMargemArray = [];
            somaCMVrray = [];
            for (const unidade of unidadesFat) {
              somaFatArray.push(parseFloat(unidade['somaFat']));
              somaMargemArray.push(parseFloat(unidade['somaMargem']));
              somaCMVrray.push(parseFloat(unidade['cmv_vlr']));
              multiempresa[unidade['idCentroCusto']] = {
                unidade: unidade['unidade'],
                idEmpBird: unidade['idEmpBird'],
                telefone: unidade['telefone'],
                cep: unidade['cep'],
                endereco: unidade['endereco'],
                bairro: unidade['bairro'],
                cidade: unidade['cidade'],
                uf: unidade['uf'],
                ultimaExportacao: unidade['ultimaExportacao'],
                check: true,
                display: 'block',
              };
              this.multiempresa.empresas[this.valIdToken].centrodecustos =
                multiempresa;
              await this.storage.set('multiEmpresa', this.multiempresa);
            }
          }
          const unidadesTotalBillingId = {};
          const unidadesIgnore = [];
          const ignoreSomaFatArray = [];
          const ignoreSomaMargemArray = [];
          const ignoreSomaCMVrray = [];
          for (const unidId of Object.values(unidades['totalBilling'])) {
            unidadesTotalBillingId[unidId['idCentroCusto']] = unidId;
          }
          for (const unidadegIgnore of Object.values(
            this.unidadesCheck[this.valIdToken]
          )) {
            if (unidadegIgnore['check'] === false) {
              unidadesIgnore.push(unidadegIgnore['unidade']);
              ignoreSomaFatArray.push(
                parseFloat(
                  unidadesTotalBillingId[
                    unidadesIgnore[unidadesIgnore.length - 1]
                  ]['somaFat']
                )
              );
              ignoreSomaMargemArray.push(
                parseFloat(
                  unidadesTotalBillingId[
                    unidadesIgnore[unidadesIgnore.length - 1]
                  ]['somaMargem']
                )
              );
              ignoreSomaCMVrray.push(
                parseFloat(
                  unidadesTotalBillingId[
                    unidadesIgnore[unidadesIgnore.length - 1]
                  ]['cmv_vlr']
                )
              );
            }
          }
          const somaArray = (total, numero) => total + numero;
          const prepareRealFat =
            somaFatArray.reduce(somaArray, 0) -
            ignoreSomaFatArray.reduce(somaArray, 0);
          const prepareRealMargem =
            somaMargemArray.reduce(somaArray, 0) -
            ignoreSomaMargemArray.reduce(somaArray, 0);
          let prepareRealCMV =
            (somaCMVrray.reduce(somaArray, 0) -
              ignoreSomaCMVrray.reduce(somaArray, 0)) /
            (somaCMVrray.length - unidadesIgnore.length);
          if (!this.cmvPerc) {
            prepareRealCMV =
              somaCMVrray.reduce(somaArray, 0) -
              ignoreSomaCMVrray.reduce(somaArray, 0);
          }
          if (this.mask === true) {
            this.somaFatTotal = prepareRealFat.toLocaleString('pt-br', {
              style: 'currency',
              currency: 'BRL',
            });
            this.somaMargemTotal = prepareRealMargem.toLocaleString('pt-br', {
              style: 'currency',
              currency: 'BRL',
            });
            if (this.cmvPerc === true) {
              if (isNaN(prepareRealCMV)) {
                prepareRealCMV = 0;
                this.somaCMVTotal = prepareRealCMV.toString();
              } else {
                this.somaCMVTotal = prepareRealCMV.toFixed(2).toString();
              }
            } else if (this.cmvPerc === false) {
              this.somaCMVTotal = prepareRealCMV.toLocaleString('pt-br', {
                style: 'currency',
                currency: 'BRL',
              });
            }
            this.contentLoader = true;
            this.dateLoader = false;
            this.dateLoaderTotal = false;
          } else {
            this.somaFatTotal = this.formatReall(
              prepareRealFat.toFixed(2)
            ).toString();
            this.somaMargemTotal = this.formatReall(
              prepareRealMargem.toFixed(2)
            ).toString();
            if (this.cmvPerc === true) {
              if (isNaN(prepareRealCMV)) {
                prepareRealCMV = 0;
                this.somaCMVTotal = prepareRealCMV.toString();
              } else {
                this.somaCMVTotal = prepareRealCMV.toFixed(2).toString();
              }
            } else if (this.cmvPerc === false) {
              this.somaCMVTotal = this.formatReall(
                prepareRealCMV.toFixed(2)
              ).toString();
            }
            this.contentLoader = true;
            this.dateLoader = false;
            this.dateLoaderTotal = false;
          }
        }
      },
      async (error) => {}
    );
  }
  async dateChangeInit(value) {
    this.dateValueInitFormat = format(parseISO(value), 'dd/MM/yyyy');
    this.dateValueInit = value;
  }
  async dateChangeFinish(value) {
    this.dateValueFinishFormat = format(parseISO(value), 'dd/MM/yyyy');
    this.dateValueFinish = value;
  }
  async dateChangeDay(value) {
    this.dateValueDayFormat = format(parseISO(value), 'dd/MM/yyyy');
    this.dateValueDay = value;
  }
  async applyDateChanger() {
    this.dateLoader = true;
    this.dateLoaderTotal = true;
    this.unidadeFatTotal();
    if (this.valueGraficoIntervalFilter !== this.valueGraficoInterval) {
      this.valueGraficoInterval = this.valueGraficoIntervalFilter;
      this.headerFat(await this.storage.get('intervalHeader'));
    }
  }
  formatReall(valor) {
    valor = valor + '';
    valor = parseInt(valor.replace(/[\D]+/g, ''), 10);
    valor = valor + '';
    valor = valor.replace(/([0-9]{2})$/g, ',$1');
    if (valor.length > 6) {
      valor = valor.replace(/([0-9]{3}),([0-9]{2}$)/g, '.$1,$2');
    }
    return valor;
  }
  convertInReal(valor) {
    if (this.mask === true) {
      return parseFloat(valor).toLocaleString('pt-br', {
        style: 'currency',
        currency: 'BRL',
      });
    } else {
      valor = valor + '';
      valor = parseInt(valor.replace(/[\D]+/g, ''), 10);
      valor = valor + '';
      valor = valor.replace(/([0-9]{2})$/g, ',$1');
      if (valor.length > 6) {
        valor = valor.replace(/([0-9]{3}),([0-9]{2}$)/g, '.$1,$2');
      }
      return valor;
    }
  }

  async setGraficoInterval(event) {
    this.valueGraficoIntervalFilter = event.detail.value;
  }
  async setInterval(event) {
    await this.storage.set('interval', event.detail.value);
    this.interval = await this.storage.get('interval');
    if (this.interval === 'interval') {
      this.displayIntervalUnid = 'intervalo';
      this.displayInterval = 'block';
      this.displayDay = 'none';
    } else if (this.interval === 'day') {
      this.displayInterval = 'none';
      this.displayDay = 'block';
    } else if (this.interval === 'month') {
      this.displayIntervalUnid = 'Mensal';
      this.displayDay = 'none';
      this.displayInterval = 'none';
    } else if (this.interval === 'year') {
      this.displayIntervalUnid = 'Anual';
      this.displayDay = 'none';
      this.displayInterval = 'none';
    } else if (this.interval === 'all') {
      this.displayIntervalUnid = 'Todos';
      this.displayDay = 'none';
      this.displayInterval = 'none';
    } else {
      this.displayDay = 'none';
      this.displayInterval = 'none';
    }
  }
  async unidadesChangeCheck(event, id) {
    let display = 'block';
    if (!event) {
      display = 'none';
    }
    this.unidadesCheck[this.valIdToken][id]['unidade'] = id;
    this.unidadesCheck[this.valIdToken][id]['check'] = event;
    this.unidadesCheck[this.valIdToken][id]['display'] = display;
    this.faturamentoStorage.unidadesCheck = this.unidadesCheck;
    await this.storage.set('faturamento', this.faturamentoStorage);
    this.dateLoaderTotal = true;
    this.unidadeFatTotal();
  }

  //Usuario
  async logOut(): Promise<void> {
    await this.storage.remove('login');
    await this.storage.remove('senha');
    this.router.navigateByUrl('/login/usuario', { replaceUrl: true });
  }
  redirect() {
    this.router.navigateByUrl('/home/configuracoes');
  }

  //Tratamento de Erros
  async error(err) {
    if (err === 'server') {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'Falha ao conectar com o servidor',
        message: 'Deseja tentar novamente ?',
        backdropDismiss: false,
        buttons: [
          {
            text: 'SAIR',
            role: 'cancel',
            cssClass: 'secondary',
            id: 'cancel-button',
            handler: () => {
              navigator['app'].exitApp();
            },
          },
          {
            text: 'SIM',
            id: 'confirm-button',
            handler: () => {
              this.ngOnInit();
            },
          },
        ],
      });
      await alert.present();
    } else if (err === 'serverdb') {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'Falha ao conectar com o servidor de dados',
        message: 'Deseja tentar novamente ?',
        backdropDismiss: false,
        buttons: [
          {
            text: 'SAIR',
            role: 'cancel',
            cssClass: 'secondary',
            id: 'cancel-button',
            handler: () => {
              navigator['app'].exitApp();
            },
          },
          {
            text: 'SIM',
            id: 'confirm-button',
            handler: () => {
              this.ngOnInit();
            },
          },
        ],
      });
      await alert.present();
    } else if (err === 'invalidToken') {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'Sua sessão se expirou',
        message: 'Faça o login novamente para continuar.',
        backdropDismiss: false,
        buttons: [
          {
            text: 'OK',
            id: 'confirm-button',
            handler: () => {
              this.navCtrl.pop();
              this.router.navigateByUrl('/login/usuario', { replaceUrl: true });
            },
          },
        ],
      });
      await alert.present();
    } else if (err === 'errLogEmp' || err === 'failed') {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'Falha ao logar na empresa',
        backdropDismiss: false,
        buttons: [
          {
            text: 'OK',
            id: 'confirm-button',
            handler: () => {
              this.router.navigateByUrl('/login/empresa', { replaceUrl: true });
            },
          },
        ],
      });
      await alert.present();
    } else if (err === 'errLog') {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'Falha ao logar',
        backdropDismiss: false,
        buttons: [
          {
            text: 'OK',
            id: 'confirm-button',
            handler: () => {
              this.router.navigateByUrl('/login/usuario', { replaceUrl: true });
            },
          },
        ],
      });
      await alert.present();
    } else if (err === 'blocked') {
      this.router.navigateByUrl('/login/tokenBlock', { replaceUrl: true });
    } else {
      const alert = await this.alertController.create({
        cssClass: 'my-custom-class',
        header: 'error desconhecido',
        message: 'Deseja tentar novamente ?',
        backdropDismiss: false,
        buttons: [
          {
            text: 'SAIR',
            role: 'cancel',
            cssClass: 'secondary',
            id: 'cancel-button',
            handler: () => {
              navigator['app'].exitApp();
            },
          },
          {
            text: 'SIM',
            id: 'confirm-button',
            handler: () => {
              this.ngOnInit();
            },
          },
        ],
      });
      await alert.present();
    }
  }

  //Outras Funcoes
  async presentAlertConfirm() {
    const alert = await this.alertController.create({
      cssClass: 'my-custom-class',
      header: 'Desconectar',
      message: 'Você realmente deseja desconectar da sua conta ?',
      buttons: [
        {
          text: 'NÃO',
          role: 'cancel',
          cssClass: 'secondary',
          id: 'cancel-button',
        },
        {
          text: 'SIM',
          id: 'confirm-button',
          handler: () => {
            this.logOut();
          },
        },
      ],
    });
    await alert.present();
  }
  async doRefresh(event) {
    this.unidadesFat = [];
    this.unidadesHeader = [];
    this.somaFatHeader = '';
    this.somaMargemHeader = '';
    this.somaFatTotal = '';
    this.somaMargemTotal = '';
    this.contentLoader = false;
    this.ionViewWillEnter();
    const verfyComplete = setInterval(() => {
      if (
        this.unidadesFat.length !== 0 &&
        this.unidadesHeader.length !== 0 &&
        this.somaMargemTotal !== ''
      ) {
        this.contentLoader = true;
        event.target.complete();
        clearInterval(verfyComplete);
      }
    }, 300);
  }
  async presentToast(men) {
    const toast = await this.toastController.create({
      message: men,
      duration: 2000,
      color: 'dark',
    });
    toast.present();
  }
}
